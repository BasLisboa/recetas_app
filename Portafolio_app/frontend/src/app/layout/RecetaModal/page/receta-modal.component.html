<ion-header>
  <ion-toolbar class="toolbar-custom">
    <ion-title>{{ receta?.nombre_receta }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cerrarModal()" class="close-btn" fill="clear">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding content-custom">
  <div class="recipe-img-wrapper">
    <img class="receta-img" [src]="receta.imagen_url" />
  </div>

  <div class="recipe-info">
    <div class="tiempo">
      <ion-icon name="time-outline"></ion-icon>
      <span>{{ receta?.tiempo }}</span>
    </div>

    <h2 class="subtitulo">Descripción</h2>
    <p class="descripcion-text">{{ receta?.descripcion_receta }}</p>

    <div *ngIf="ingredientes.length" class="ingredient-list">
      <h2 class="subtitulo">Ingredientes</h2>
      <ion-list lines="none">
        <ion-item *ngFor="let ing of ingredientes" class="ingredient-item">
          <ion-icon slot="start" name="leaf-outline"></ion-icon>
          <ion-label>
            {{ ing.nombre_ingrediente }}: {{ ing.cantidad_ing }} {{ ing.unidad_medida }}
          </ion-label>
        </ion-item>
      </ion-list>
    </div>

    <ng-container *ngIf="muestraNutri">
      <ion-card class="nutri-summary-card">
        <ion-card-header>
          <ion-card-title>Resumen Nutricional</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="nutri-summary-content">
            <div>
              <strong>Calorías totales:</strong>
              {{ nutricional.totales.totalCalorias }} kcal
            </div>
            <div>
              <strong>Proteínas totales:</strong>
              {{ nutricional.totales.totalProteinas }} g
            </div>
            <div>
              <strong>Grasas totales:</strong>
              {{ nutricional.totales.totalGrasas }} g
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </ng-container>
  
    <!-- ✅ Mueven los botones aquí -->
    <div class="actions">
      <ion-button expand="block" color="success" fill="solid" (click)="compartirReceta()">
        <ion-icon slot="start" name="qr-code-outline"></ion-icon>
        Compartir receta
      </ion-button>

      <ion-button expand="block" color="secondary" fill="outline" (click)="iniciarPasoAPaso()">
        <ion-icon slot="start" name="list-outline"></ion-icon>
        Iniciar Paso a Paso
      </ion-button>
    </div>
  </div>
</ion-content>
